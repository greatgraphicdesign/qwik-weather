import{u as p,c as d,q as a,r as L,s as j,a as C,I,p as h,C as u,k as c,j as i,f as R,R as A,_hW as m}from"./q-CG5bTEZD.js";import{_ as s}from"./q-BKunlu9X.js";import{a as D}from"./q-B9OXJep7.js";import{W as k}from"./q-CnCPPY2P.js";import{W as q}from"./q-B3tx4YOs.js";const z=({track:e})=>{const[t]=p();if(e(()=>t.weatherToday),t.weatherToday){const o=t.weatherToday,r=new Date().toLocaleTimeString("en",{timeStyle:"short",hour12:!1,timeZone:o.timezone}).split(":"),l=document.querySelector(`#i${r[0]}`);if(l){l.classList.add("current");const _=l.nextElementSibling;_ instanceof HTMLSpanElement&&_.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}},N=Object.freeze(Object.defineProperty({__proto__:null,_hW:m,s_9Dk7fUYNCDI:z},Symbol.toStringTag,{value:"Module"})),V=d(a(()=>s(()=>import("./q-DEx2I51c.js"),[]),"s_oQnubcoI5HI")),M=d(a(()=>s(()=>import("./q-CnCPPY2P.js").then(e=>e.a),[]),"s_SdTHsMBGSa0")),H=d(a(()=>s(()=>import("./q-B5Z3-g2N.js"),[]),"s_0ADYAZ4tl5U")),J=()=>{const e=L({displayLocation:"",error:"",forecast:null,query:"",weatherToday:null});j(k,e);const t=C(D),o=a(()=>s(()=>Promise.resolve().then(()=>Z),void 0),"s_0CAUp0JTeY8",[t]),n=I(a(()=>s(()=>Promise.resolve().then(()=>U),void 0),"s_ZrRVap1iTHs",[e]));return h(a(()=>s(()=>Promise.resolve().then(()=>X),void 0),"s_zqpXT8B27s0",[e])),h(a(()=>s(()=>Promise.resolve().then(()=>G),void 0),"s_vg3z8wZWCPA",[e])),h(a(()=>s(()=>Promise.resolve().then(()=>N),void 0),"s_9Dk7fUYNCDI",[e])),u("div",null,{class:"weather-app"},[u("button",null,{class:"about-btn",onClick$:o},"⚙",3,null),u("div",null,{class:"inner"},u("h1",null,null,"Check the Weather",3,null),3,null),u("form",null,{class:"inner","preventdefault:submit":!0},[c(M,null,3,"H1_1"),c(A,{onPending:()=>c(H,null,3,"H1_2"),onRejected:r=>c(V,{get message(){return r.message},[i]:{message:R(r,"message")}},3,"H1_3"),onResolved:()=>c(q,null,3,"H1_4"),value:n,[i]:{onPending:i,onRejected:i,onResolved:i,value:i}},3,"H1_5")],1,null)],1,"H1_6")},ne=Object.freeze(Object.defineProperty({__proto__:null,s_xYL1qOwPyDI:J},Symbol.toStringTag,{value:"Module"}));async function $(e,t){function o(P){const x=P.toUpperCase().split("").map(E=>127397+E.charCodeAt(0));return String.fromCodePoint(...x)}const n={displayLocation:"",forecast:{},weatherToday:{}};if(/,\s/.test(e)||e.length<4)throw new Error("Please enter the city name (only) or a zip code.");const r=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=10&language=en&format=json`,{signal:t.signal});if(!r.ok)throw new Error("Something went wrong when fetching the geo location.");const l=await r.json();if(!l.results)throw new Error(`“${e}” not found.`);const{latitude:_,longitude:g,timezone:f,name:b,admin1:w,country_code:v}=l.results[0];n.displayLocation=`${b}${w?`, ${w}`:""} ${o(v)}`;const y=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${_}&longitude=${g}&timezone=${f}&temperature_unit=fahrenheit&forecast_days=8&daily=weathercode,temperature_2m_max,temperature_2m_min`,{signal:t.signal});if(!y.ok)throw new Error("Something went wrong when fetching the forecast.");const S=await y.json();n.forecast=S.daily;const T=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${_}&longitude=${g}&timezone=${f}&temperature_unit=fahrenheit&forecast_days=2&hourly=weathercode,temperature_2m,temperature_2m&daily=temperature_2m_max,temperature_2m_min`,{signal:t.signal});if(!T.ok)throw new Error("Something went wrong when fetching the forecast.");const O=await T.json();return n.weatherToday=O,n}const W=async({track:e,cleanup:t})=>{const[o]=p();e(()=>o.query);const n=new AbortController;t(()=>n.abort("cleanup"));const r=await $(o.query,n);return r&&"displayLocation"in r&&(o.displayLocation=r.displayLocation,o.forecast=r.forecast,o.weatherToday=r.weatherToday),r},U=Object.freeze(Object.defineProperty({__proto__:null,s_ZrRVap1iTHs:W},Symbol.toStringTag,{value:"Module"})),Y=d(a(()=>s(()=>import("./q-B9OXJep7.js").then(e=>e.e),[]),"s_5Wn3iQBlyEQ")),Q=()=>{const[e]=p();document.body.classList.add("lock"),e("modal",c(Y,{content:`
          <p>This is an enhanced version of the Classy Weather project in Jonas Schmedtmann’s Ultimate React Course, converted to the Qwik framework. It is offered without warrants or represents.</p>
          <p>The data you enter is stored on this device using your browser’s built-in storage. This can be emptied by clearing your browser data. The app tracks nothing.</p>
          <p>Weather data courtesy of open-meteo.com. Enjoy!</p>
          <p><a href="https://codesynopsis.com/apps">More apps</a></p>
        `,[i]:{content:i}},3,"H1_0"))},Z=Object.freeze(Object.defineProperty({__proto__:null,_hW:m,s_0CAUp0JTeY8:Q},Symbol.toStringTag,{value:"Module"})),B=()=>{const[e]=p(),t=localStorage.getItem("weatherLocation");t&&JSON.parse(t).length&&JSON.parse(t)!==e.query?e.query=JSON.parse(t):e.query="Bellingham"},X=Object.freeze(Object.defineProperty({__proto__:null,_hW:m,s_zqpXT8B27s0:B},Symbol.toStringTag,{value:"Module"})),F=({track:e})=>{const[t]=p();e(()=>t.query);const o=localStorage.getItem("weatherLocation");o&&JSON.parse(o).length&&JSON.parse(o)!==t.query&&t.query.length||!(o&&JSON.parse(o).length)?localStorage.setItem("weatherLocation",JSON.stringify(t.query)):o&&JSON.parse(o).length&&JSON.parse(o)!==t.query&&!t.query.length&&localStorage.removeItem("weatherLocation")},G=Object.freeze(Object.defineProperty({__proto__:null,_hW:m,s_vg3z8wZWCPA:F},Symbol.toStringTag,{value:"Module"}));export{m as _hW,ne as i,Q as s_0CAUp0JTeY8,z as s_9Dk7fUYNCDI,W as s_ZrRVap1iTHs,F as s_vg3z8wZWCPA,J as s_xYL1qOwPyDI,B as s_zqpXT8B27s0};
